import moment, { Moment } from 'moment';

/**
 * Checks if a given date is at midnight (00:00:00).
 * @param input - The date to check.
 * @returns True if the date is at midnight, otherwise false.
 */
export function isMidnight(input: Date) {
  const date = moment.utc(input);
  return date.get('h') === 0 && date.get('m') === 0 && date.get('s') === 0;
}

/**
 * Adds a specified number of hours to a date.
 * @param input - The original date.
 * @param hoursToAdd - The number of hours to add.
 * @returns A new date with the added hours.
 */
export function addHoursToDate(input: Date, hoursToAdd: number) {
  const date = new Date(input);
  const newDate = new Date(date.getTime() + hoursToAdd * 60 * 60 * 1000);
  return newDate;
}

/**
 * Formats the date period into a readable string.
 * @param startDate - The start date.
 * @param endDate - The end date.
 * @returns A formatted date period with hours.
 */
export function formatDatePeriod(
  startDate: Moment | Date,
  endDate: Moment | Date,
) {
  const start = moment.isMoment(startDate) ? startDate : moment(startDate);
  const end = moment.isMoment(endDate) ? endDate : moment(endDate);

  const sameMonth = start.month() === end.month();
  const sameYear = start.year() === end.year();

  if (sameMonth && sameYear) {
    // Dates are in the same month
    return `${start.format('D')} - ${end.format('D MMM')}`;
  } else {
    // Dates span different months or years
    return `${start.format('D MMM')} - ${end.format('D MMM')}`;
  }
}
