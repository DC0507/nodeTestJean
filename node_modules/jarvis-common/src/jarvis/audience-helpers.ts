// from jarvis-be/src/model/enum/audienceCodes.ts
export const GLOBALAUDIENCE = 'Global';

/**
 * Converts a comma or semicolon-separated string of audiences into an array.
 * @param audiences - A string of audiences.
 * @returns An array of audience strings.
 */
export const audiencesToArray = (audiences: string): string[] => {
  // audiences could be empty for the following reasons:
  // API call
  // subscription call
  if (!audiences)
    console.log(`Warning: Subscription audience NULL (at ${new Date()})`);

  // everyone always gets items marked with Global
  const global = [GLOBALAUDIENCE];
  let audienceArray: string[] = [];
  if (audiences) {
    audienceArray = audiences
      .split(/[,;]/)
      .filter((a) => a.trim() !== '')
      .map((a) => a.trim());
  }
  return global.concat(audienceArray);
};
